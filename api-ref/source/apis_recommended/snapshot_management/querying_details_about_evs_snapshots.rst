:original_name: evs_04_2021.html

.. _evs_04_2021:

Querying Details About EVS Snapshots
====================================

Function
--------

This API is used to query details about the EVS snapshots.

URI
---

-  URI format

   GET /v2/{project_id}/cloudsnapshots/detail

Request
-------

The following example shows how to query details of the snapshots in the **available** state.

-  Example request

   .. code-block:: text

      GET https://{endpoint}/v2/{project_id}/cloudsnapshots/detail?status=available

Response
--------

-  Parameter description

   +-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Type             | Description                                                                                                                                                                                                                                                                                                    |
   +=================+==================+================================================================================================================================================================================================================================================================================================================+
   | count           | Integer          | The total number of snapshots. The value is not affected by parameters **limit** and **offset**.                                                                                                                                                                                                               |
   +-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | snapshots       | Array of Objects | The snapshot information. For details, see :ref:`Parameters in the snapshots field <evs_04_2021__en-us_topic_0123550104_li444161713165>`.                                                                                                                                                                      |
   +-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | snapshots_links | Array of Objects | The query position marker in the snapshot list. This parameter is returned only when parameter **limit** is specified in the request, and it indicates that only some snapshots are returned in this query. For details, see :ref:`Description of the snapshots_links parameter <evs_04_2021__li63848142013>`. |
   +-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error           | Object           | The error message returned if an error occurs. For details, see :ref:`Parameters in the error field <evs_04_2021__li0419202382514>`.                                                                                                                                                                           |
   +-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  .. _evs_04_2021__en-us_topic_0123550104_li444161713165:

   Parameters in the **snapshots** field

   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                                  | Type                  | Description                                                                                                                          |
   +============================================+=======================+======================================================================================================================================+
   | id                                         | String                | The snapshot ID.                                                                                                                     |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | status                                     | String                | The snapshot status. For details, see :ref:`EVS Snapshot Status <evs_04_0041>`.                                                      |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | name                                       | String                | The snapshot name.                                                                                                                   |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | description                                | String                | The snapshot description.                                                                                                            |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | created_at                                 | String                | The time when the snapshot was created.                                                                                              |
   |                                            |                       |                                                                                                                                      |
   |                                            |                       | Time format: UTC YYYY-MM-DDTHH:MM:SS.XXXXXX                                                                                          |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at                                 | String                | The time when the snapshot was updated.                                                                                              |
   |                                            |                       |                                                                                                                                      |
   |                                            |                       | Time format: UTC YYYY-MM-DDTHH:MM:SS.XXXXXX                                                                                          |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | metadata                                   | Object                | The snapshot metadata.                                                                                                               |
   |                                            |                       |                                                                                                                                      |
   |                                            |                       | If **metadata** contains the **\__system__enableActive** field, the snapshot is automatically created during the backup of a server. |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | volume_id                                  | String                | The ID of the snapshot's source disk.                                                                                                |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | size                                       | Integer               | The snapshot size, in GB.                                                                                                            |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | os-extended-snapshot-attributes:project_id | String                | The tenant ID. The tenant ID is the same as the project ID.                                                                          |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | os-extended-snapshot-attributes:progress   | String                | The reserved field.                                                                                                                  |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+
   | service_type                               | String                | The service type.                                                                                                                    |
   +--------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+

-  .. _evs_04_2021__li63848142013:

   Parameter in the **snapshots_links** field

   ========= ====== ================================
   Parameter Type   Description
   ========= ====== ================================
   href      String The corresponding shortcut link.
   rel       String The shortcut link marker name.
   ========= ====== ================================

-  .. _evs_04_2021__li0419202382514:

   Parameters in the **error** field

   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                             |
   +=======================+=======================+=========================================================================+
   | message               | String                | The error message returned if an error occurs.                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | code                  | String                | The error code returned if an error occurs.                             |
   |                       |                       |                                                                         |
   |                       |                       | For details about the error code, see :ref:`Error Codes <evs_04_0038>`. |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
          "count": 3,
          "snapshots_links": [
              {
                  "href": "https://172.28.9.185:8776/v2/20a68d6b7a124ae2b6b8a22046ee5966/snapshots/detail?limit=1&marker=fc05d5d7-7e99-42fb-b6f2-9ddd1b990e67",
                  "rel": "next"
              }
          ],
          "snapshots": [
              {
                  "status": "available",
                  "description": null,
                  "updated_at": "2018-06-06T10:58:47.349051",
                  "volume_id": "f687bd70-37b3-4f00-a900-0ba1cfaa5196",
                  "id": "fc05d5d7-7e99-42fb-b6f2-9ddd1b990e67",
                  "size": 1,
                  "os-extended-snapshot-attributes:progress": "100%",
                  "name": "test03",
                  "os-extended-snapshot-attributes:project_id": "20a68d6b7a124ae2b6b8a22046ee5966",
                  "service_type": "EVS",
                  "created_at": "2018-05-30T03:14:44.457975",
                  "metadata": { }
              }
          ]
      }

   or

   .. code-block::

      {
          "error": {
              "message": "XXXX",
              "code": "XXX"
          }
      }

   In the preceding example, **error** indicates a general error, for example, **badRequest** or **itemNotFound**. An example is provided as follows:

   .. code-block::

      {
          "badRequest": {
              "message": "XXXX",
              "code": "XXX"
          }
      }

Error Codes
-----------

For details, see :ref:`Error Codes <evs_04_0038>`.
