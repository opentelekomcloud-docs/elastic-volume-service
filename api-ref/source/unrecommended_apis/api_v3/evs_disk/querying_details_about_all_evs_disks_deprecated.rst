:original_name: evs_04_3004.html

.. _evs_04_3004:

Querying Details About All EVS Disks (Deprecated)
=================================================

Function
--------

This API is used to query details about all disks.

URI
---

-  URI format

   GET /v3/{project_id}/os-vendor-volumes/detail

-  Parameter description

   ========== ========= =========================
   Parameter  Mandatory Description
   ========== ========= =========================
   project_id Yes       Specifies the project ID.
   ========== ========= =========================

-  Request filter parameters

   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter         | Type             | Mandatory       | Description                                                                                                                                                                                    |
   +===================+==================+=================+================================================================================================================================================================================================+
   | marker            | String           | No              | Specifies the ID of the last record on the previous page. The returned value is the value of the item after this one.                                                                          |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name              | String           | No              | Specifies the disk name. The value can contain a maximum of 255 bytes.                                                                                                                         |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | limit             | Integer          | No              | Specifies the maximum number of query results that can be returned.                                                                                                                            |
   |                   |                  |                 |                                                                                                                                                                                                |
   |                   |                  |                 | The value ranges from 1 to 1000, and the default value is 1000. The returned value cannot exceed this limit.                                                                                   |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key          | String           | No              | Specifies the keyword based on which the returned results are sorted. The value can be **id**, **status**, **size**, or **created_at**, and the default value is **created_at**.               |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir          | String           | No              | Specifies the result sorting order. The default value is **desc**.                                                                                                                             |
   |                   |                  |                 |                                                                                                                                                                                                |
   |                   |                  |                 | -  **desc**: indicates the descending order.                                                                                                                                                   |
   |                   |                  |                 | -  **asc**: indicates the ascending order.                                                                                                                                                     |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset            | Integer          | No              | Specifies the offset. All disks after this offset will be queried. The value must be an integer greater than 0 but less than the number of disks.                                              |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status            | String           | No              | Specifies the disk status. For details, see :ref:`EVS Disk Status <evs_04_0040>`.                                                                                                              |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | metadata          | String           | No              | Specifies the disk metadata.                                                                                                                                                                   |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | availability_zone | String           | No              | Specifies the AZ to which the disk belongs.                                                                                                                                                    |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | multiattach       | Boolean          | No              | Specifies whether the disk is shareable.                                                                                                                                                       |
   |                   |                  |                 |                                                                                                                                                                                                |
   |                   |                  |                 | -  **true**: specifies a shared disk.                                                                                                                                                          |
   |                   |                  |                 | -  **false**: specifies a non-shared disk.                                                                                                                                                     |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume_type_id    | String           | No              | Specifies the disk type ID.                                                                                                                                                                    |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                | String           | No              | Specifies the disk ID.                                                                                                                                                                         |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ids               | Array of strings | No              | Specifies the disk IDs. The parameter value is in the *ids=['id1','id2',...,'idx']* format. In the response, the **ids** value contains valid disk IDs only. Invalid disk IDs will be ignored. |
   |                   |                  |                 |                                                                                                                                                                                                |
   |                   |                  |                 | Details about a maximum of 60 disks can be queried.                                                                                                                                            |
   |                   |                  |                 |                                                                                                                                                                                                |
   |                   |                  |                 | If parameters **id** and **ids** are both specified in the request, **id** will be ignored.                                                                                                    |
   +-------------------+------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

The following example shows how to query the shared disks in the **available** state.

-  Example request

   .. code-block:: text

      GET https://{endpoint}/v3/{project_id}/os-vendor-volumes/detail?status=available&multiattach=true

Response
--------

-  Parameter description

   +---------------+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type             | Description                                                                                                                                                                                                                                                                                                                   |
   +===============+==================+===============================================================================================================================================================================================================================================================================================================================+
   | volumes       | Array of objects | Specifies the list of queried disks. For details, see :ref:`Parameters in the volumes field <evs_04_3004__li6938526142910>`.                                                                                                                                                                                                  |
   +---------------+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volumes_links | Array of objects | Specifies the query position marker in the disk list. If only some disks are returned in this query, the URL of the last disk queried will be returned. You can use this URL to continue to query the remaining disks in the next query. For details, see :ref:`Parameters in the links field <evs_04_3004__li497317268296>`. |
   +---------------+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | count         | Integer          | Specifies the number of queried disks. This value is not affected by the pagination.                                                                                                                                                                                                                                          |
   +---------------+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error         | Object           | Specifies the error message returned when an error occurs. For details, see :ref:`Parameters in the error field <evs_04_3004__li0419202382514>`.                                                                                                                                                                              |
   +---------------+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  .. _evs_04_3004__li6938526142910:

   Parameters in the **volumes** field

   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                             | Type                  | Description                                                                                                                                            |
   +=======================================+=======================+========================================================================================================================================================+
   | id                                    | String                | Specifies the disk ID.                                                                                                                                 |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | links                                 | Array of objects      | Specifies the disk URI. For details, see :ref:`Parameters in the links field <evs_04_3004__li497317268296>`.                                           |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                                  | String                | Specifies the disk name.                                                                                                                               |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                                | String                | Specifies the disk status. For details, see :ref:`EVS Disk Status <evs_04_0040>`.                                                                      |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | attachments                           | Array of objects      | Specifies the disk attachment information. For details, see :ref:`Parameters in the attachments field <evs_04_3004__li14979192617290>`.                |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | availability_zone                     | String                | Specifies the AZ to which the disk belongs.                                                                                                            |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os-vol-host-attr:host                 | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_volid                          | String                | Specifies the source disk ID. This parameter has a value if the disk is created from a source disk.                                                    |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | Currently, this field is not supported by EVS.                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | snapshot_id                           | String                | Specifies the snapshot ID. This parameter has a value if the disk is created from a snapshot.                                                          |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description                           | String                | Specifies the disk description.                                                                                                                        |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at                            | String                | Specifies the time when the disk was created.                                                                                                          |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | Time format: UTC YYYY-MM-DDTHH:MM:SS.XXXXXX                                                                                                            |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume_type                           | String                | Specifies the disk type.                                                                                                                               |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | Currently, the value can be **SSD**, **SAS**, **SATA**, **co-p1**, or **uh-l1**.                                                                       |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **SSD**: specifies the ultra-high I/O disk type.                                                                                                    |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **SAS**: specifies the high I/O disk type.                                                                                                          |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **SATA**: specifies the common I/O disk type.                                                                                                       |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **co-p1**: specifies the high I/O (performance-optimized I) disk type.                                                                              |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **uh-l1**: specifies the ultra-high I/O (latency-optimized) disk type.                                                                              |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       |    Disks of the **co-p1** and **uh-l1** types are used exclusively for HPC ECSs and SAP HANA ECSs.                                                     |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os-vol-tenant-attr:tenant_id          | String                | Specifies the ID of the tenant to which the disk belongs. The tenant ID is actually the project ID.                                                    |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size                                  | Integer               | Specifies the disk size, in GB.                                                                                                                        |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | metadata                              | Object                | Specifies the disk metadata. For details, see :ref:`Parameters in the metadata field <evs_04_3004__li4145283210319>`.                                  |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | If **metadata** does not contain the **hw:passthrough** field, the disk device type is VBD.                                                            |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | If **metadata** does not contain the **\__system__encrypted** field, the disk is not encrypted.                                                        |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os-vol-mig-status-attr:migstat        | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os-vol-mig-status-attr:name_id        | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os-volume-replication:extended_status | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | encrypted                             | Boolean               | Currently, this field is not supported by EVS.                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | replication_status                    | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | user_id                               | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | consistencygroup_id                   | String                | Reserved field                                                                                                                                         |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bootable                              | String                | Specifies whether the disk is bootable.                                                                                                                |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **true**: specifies a bootable disk.                                                                                                                |
   |                                       |                       | -  **false**: specifies a non-bootable disk.                                                                                                           |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at                            | String                | Specifies the time when the disk was updated.                                                                                                          |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | Time format: UTC YYYY-MM-DDTHH:MM:SS.XXXXXX                                                                                                            |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | shareable                             | String                | Specifies whether the disk is shareable.                                                                                                               |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | .. note::                                                                                                                                              |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       |    This field is no longer used. Use **multiattach**.                                                                                                  |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | multiattach                           | Boolean               | Specifies whether the disk is shareable.                                                                                                               |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | -  **true**: specifies a shared disk.                                                                                                                  |
   |                                       |                       | -  **false**: specifies a non-shared disk.                                                                                                             |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume_image_metadata                 | Object                | Specifies the metadata of the disk image. This field has a value if the disk is created from an image. Otherwise, it is left empty.                    |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | .. note::                                                                                                                                              |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       |    For details about **volume_image_metadata**, see **Querying Image Details (Native OpenStack API)** in the *Image Management Service API Reference*. |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                                  | Object                | Specifies the disk tags.                                                                                                                               |
   |                                       |                       |                                                                                                                                                        |
   |                                       |                       | This field is returned if the disk has tags. Otherwise, it is left empty.                                                                              |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
   | wwn                                   | String                | Specifies the unique identifier used when attaching the disk.                                                                                          |
   +---------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+

-  .. _evs_04_3004__li497317268296:

   Parameters in the **links** field

   ========= ====== ==========================================
   Parameter Type   Description
   ========= ====== ==========================================
   href      String Specifies the corresponding shortcut link.
   rel       String Specifies the shortcut link marker name.
   ========= ====== ==========================================

-  .. _evs_04_3004__li14979192617290:

   Parameters in the **attachments** field

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                     |
   +=======================+=======================+=================================================================================================+
   | server_id             | String                | Specifies the ID of the server to which the disk is attached.                                   |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | attachment_id         | String                | Specifies the ID of the attachment information.                                                 |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | attached_at           | String                | Specifies the time when the disk was attached.                                                  |
   |                       |                       |                                                                                                 |
   |                       |                       | Time format: UTC YYYY-MM-DDTHH:MM:SS.XXXXXX                                                     |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | host_name             | String                | Specifies the name of the physical host accommodating the server to which the disk is attached. |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | volume_id             | String                | Specifies the disk ID.                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | device                | String                | Specifies the device name.                                                                      |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | id                    | String                | Specifies the ID of the attached resource.                                                      |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+

-  .. _evs_04_3004__li4145283210319:

   Parameters in the **metadata** field

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                         |
   +=======================+=======================+=====================================================================================================================================================================================+
   | \__system__encrypted  | String                | Specifies the parameter that describes the encryption function in **metadata**. The value can be **0** or **1**.                                                                    |
   |                       |                       |                                                                                                                                                                                     |
   |                       |                       | -  **0**: indicates the disk is not encrypted.                                                                                                                                      |
   |                       |                       | -  **1**: indicates the disk is encrypted.                                                                                                                                          |
   |                       |                       | -  If this parameter does not appear, the disk is not encrypted by default.                                                                                                         |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | \__system__cmkid      | String                | Specifies the encryption CMK ID in **metadata**. This parameter is used together with **\__system__encrypted** for encryption. The length of **cmkid** is fixed at 36 bytes.        |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | hw:passthrough        | String                | Specifies the parameter that describes the disk device type in **metadata**. The value can be **true** or **false**.                                                                |
   |                       |                       |                                                                                                                                                                                     |
   |                       |                       | -  If this parameter is set to **true**, the disk device type is SCSI, which allows ECS OSs to directly access the underlying storage media and supports SCSI reservation commands. |
   |                       |                       | -  If this parameter is set to **false**, the disk device type is VBD (the default type), that is, Virtual Block Device (VBD), which supports only simple SCSI read/write commands. |
   |                       |                       | -  If this parameter does not appear, the disk device type is VBD.                                                                                                                  |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | full_clone            | String                | Specifies the clone method. When the disk is created from a snapshot, the parameter value is **0**, indicating the linked cloning method.                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  .. _evs_04_3004__li0419202382514:

   Parameters in the **error** field

   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                             |
   +=======================+=======================+=========================================================================+
   | message               | String                | Specifies the error message returned when an error occurs.              |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | code                  | String                | Specifies the error code returned when an error occurs.                 |
   |                       |                       |                                                                         |
   |                       |                       | For details about the error code, see :ref:`Error Codes <evs_04_0038>`. |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
          "count": 1,
          "volumes": [
              {
                  "attachments": [ ],
                  "availability_zone": "az-dc-1",
                  "bootable": "false",
                  "consistencygroup_id": null,
                  "created_at": "2016-05-25T02:42:10.856332",
                  "description": null,
                  "encrypted": false,
                  "id": "b104b8db-170d-441b-897a-3c8ba9c5a214",
                  "links": [
                      {
                          "href": "https://volume.localdomain.com:8776/v3/dd14c6ac581f40059e27f5320b60bf2f/volumes/b104b8db-170d-441b-897a-3c8ba9c5a214",
                          "rel": "self"
                      },
                      {
                          "href": "https://volume.localdomain.com:8776/dd14c6ac581f40059e27f5320b60bf2f/volumes/b104b8db-170d-441b-897a-3c8ba9c5a214",
                          "rel": "bookmark"
                      }
                  ],
                  "metadata": {},
                  "name": "zjb_u25_test",
                  "os-vol-host-attr:host": "pod01.xxx#SATA",
                  "volume_image_metadata": { },
                  "os-vol-mig-status-attr:migstat": null,
                  "os-vol-mig-status-attr:name_id": null,
                  "os-vol-tenant-attr:tenant_id": "dd14c6ac581f40059e27f5320b60bf2f",
                  "os-volume-replication:extended_status": null,
                  "replication_status": "disabled",
                  "multiattach": false,
                  "size": 1,
                  "snapshot_id": null,
                  "source_volid": null,
                  "status": "available",
                  "updated_at": "2016-05-25T02:42:22.341984",
                  "user_id": "b0524e8342084ef5b74f158f78fc3049",
                  "volume_type": "SATA",
                  "service_type": "EVS",
                  "wwn": " 688860300000d136fa16f48f05992360"
              }
          ],
          "volumes_links": [
              {
                  "href": "https://volume.localdomain.com:8776/v3/dd14c6ac581f40059e27f5320b60bf2f/volumes/detail?limit=1&marker=b104b8db-170d-441b-897a-3c8ba9c5a214",
                  "rel": "next"
              }
          ]
      }

   or

   .. code-block::

      {
          "error": {
              "message": "XXXX",
              "code": "XXX"
          }
      }

   In the preceding example, **error** indicates a general error, for example, **badRequest** or **itemNotFound**. An example is provided as follows:

   .. code-block::

      {
          "badRequest": {
              "message": "XXXX",
              "code": "XXX"
          }
      }

Status Codes
------------

-  Normal

   200

Error Codes
-----------

For details, see :ref:`Error Codes <evs_04_0038>`.
